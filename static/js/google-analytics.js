// Generated by CoffeeScript 1.6.3
(function() {
  window._gaq = window._gaq || [];

  window.Anly = function(opt) {
    var p;
    this.settings = {
      outIgnoreDomains: [],
      downloadFileTypes: ["doc", "xls", "pdf", "mp3"]
    };
    for (p in opt) {
      if (opt.hasOwnProperty(p)) {
        this.settings[p] = opt[p];
      }
    }
    return _gaq.push(["_setAccount", this.settings.account]);
  };

  Anly.loadScript = function() {
    var g, prefix, s;
    s = document.getElementsByTagName("script")[0];
    g = document.createElement("script");
    g.async = true;
    prefix = ("https:" === location.protocol ? "https://ssl" : "http://www");
    g.src = prefix + ".google-analytics.com/ga.js";
    return s.parentNode.insertBefore(g, s);
  };

  Anly.prototype = {
    trackPageview: function() {
      return _gaq.push(["_trackPageview"]);
    },
    setCustomVar: function(slot, name, value, scope) {
      return _gaq.push(["_setCustomVar", slot, name, value, scope]);
    },
    trackEvent: function(category, action, label, value) {
      return _gaq.push(["_trackEvent", category, action, label, value]);
    },
    trackClickEvent: function(category, href, event) {
      event.preventDefault();
      this.trackEvent(category, "click", href);
      return window.setTimeout((function() {
        document.location = href;
        return void 0;
      }), 200);
    },
    trackOutgoing: function(event) {
      var domian, href;
      href = event.currentTarget.href;
      if ((href.match(/^http/)) && (!href.match(document.domain))) {
        domian = href.split("/")[2];
        if (this.settings.outIgnoreDomains.indexOf(domian) === -1) {
          return this.trackClickEvent("outgoing", href, event);
        }
      }
    },
    trackDownload: function(event) {
      var extension, href;
      href = event.currentTarget.href;
      extension = href.split(".").pop();
      if (this.settings.downloadFileTypes.indexOf(extension) !== -1) {
        return this.trackClickEvent("download", href, event);
      }
    }
  };

}).call(this);

/*
//@ sourceMappingURL=google-analytics.map
*/
